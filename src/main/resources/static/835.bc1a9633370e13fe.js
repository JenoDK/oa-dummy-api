"use strict";(self.webpackChunkagilent_angular_playground=self.webpackChunkagilent_angular_playground||[]).push([[835],{5835:($,l,c)=>{c.r(l),c.d(l,{UserModule:()=>N});var f=c(6895),g=c(7726),h=c(2030),o=c(5439),n=c(4650),v=c(7217),y=c(6191),T=c(8274);const p=new n.OlP("NGX_MOMENT_OPTIONS");let m=(()=>{class e{constructor(t,i){this.cdRef=t,this.ngZone=i}format(t){return t.from(o(),this.lastOmitSuffix)}transform(t,i,s){return this.hasChanged(t,i)?(this.lastTime=this.getTime(t),this.lastValue=t,this.lastOmitSuffix=i,this.lastLocale=this.getLocale(t),this.formatFn=s||this.format.bind(this),this.removeTimer(),this.createTimer(),this.lastText=this.formatFn(o(t))):this.createTimer(),this.lastText}ngOnDestroy(){this.removeTimer()}createTimer(){if(this.currentTimer)return;const t=o(this.lastValue),i=1e3*this.getSecondsUntilUpdate(t);this.currentTimer=this.ngZone.runOutsideAngular(()=>typeof window<"u"?window.setTimeout(()=>{this.lastText=this.formatFn(o(this.lastValue)),this.currentTimer=null,this.ngZone.run(()=>this.cdRef.markForCheck())},i):null)}removeTimer(){this.currentTimer&&(window.clearTimeout(this.currentTimer),this.currentTimer=null)}getSecondsUntilUpdate(t){const i=Math.abs(o().diff(t,"minute"));return i<1?1:i<60?30:i<180?300:3600}hasChanged(t,i){return this.getTime(t)!==this.lastTime||this.getLocale(t)!==this.lastLocale||i!==this.lastOmitSuffix}getTime(t){return o.isDate(t)?t.getTime():o.isMoment(t)?t.valueOf():o(t).valueOf()}getLocale(t){return o.isMoment(t)?t.locale():o.locale()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(n.sBO,16),n.Y36(n.R0b,16))},e.\u0275pipe=n.Yjl({name:"amTimeAgo",type:e,pure:!1}),e})(),b=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[{provide:p,useValue:{...t}}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({}),e})();function x(e,r){if(1&e&&(n.TgZ(0,"div")(1,"p"),n._uU(2),n.ALo(3,"amTimeAgo"),n.qZA()()),2&e){const t=r.ngIf;n.xp6(2),n.hij("Last active ",n.lcZ(3,1,t),".")}}function B(e,r){1&e&&(n.TgZ(0,"p"),n._uU(1,"Initialising..."),n.qZA())}const R=[{path:"",component:(()=>{class e{constructor(t,i,s){this.authenticationService=t,this.lastActiveService=i,this.configService=s,this.userIsLoggedIn=!1,this.expiryInSeconds=s.data.token_expiry_seconds,this.userIsLoggedIn=this.authenticationService.isLoggedIn(),this.authenticationService.loggedIn$.subscribe(u=>{this.userIsLoggedIn=u}),this.lastActiveDate$=this.lastActiveService.lastActive$,(0,h.H)(0,500).subscribe(u=>{this.secondsAgo=o.duration(o().diff(this.lastActiveService.getLastActiveDate())).asSeconds()})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(v.$),n.Y36(y.e),n.Y36(T._Z))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-user"]],decls:9,vars:6,consts:[[4,"ngIf","ngIfElse"],["loading",""]],template:function(t,i){if(1&t&&(n.YNc(0,x,4,3,"div",0),n.ALo(1,"async"),n.TgZ(2,"div")(3,"p"),n._uU(4),n.qZA(),n.TgZ(5,"p"),n._uU(6),n.qZA()(),n.YNc(7,B,2,0,"ng-template",null,1,n.W1O)),2&t){const s=n.MAs(8);n.Q6J("ngIf",n.lcZ(1,4,i.lastActiveDate$))("ngIfElse",s),n.xp6(4),n.hij("The user will be logged out after ",i.expiryInSeconds," seconds."),n.xp6(2),n.hij("Last active ",i.secondsAgo," seconds ago.")}},dependencies:[f.O5,f.Ov,m]}),e})(),children:[]}];let E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[g.Bz.forChild(R)]}),e})(),N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[f.ez,E,b]}),e})()}}]);